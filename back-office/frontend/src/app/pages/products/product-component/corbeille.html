<!-- Add livre Card -->
 <div class="row form-book">
      <div class="col">
        <div class="card p-4 shadow">
          <h4 class="mb-3">Ajouter un nouveau livre</h4>
          <form class="needs-validation" (ngSubmit)="onUserSave()" [formGroup]="bookForm">

            <!-- Ligne 1 -->
            <div class="form-row">
              <div class="form-group col-md-4">
                <input type="text" formControlName="titre" class="form-control" placeholder="Titre" required>
                <div
                  *ngIf="bookForm.get('titre')?.invalid && (bookForm.get('titre')?.touched || bookForm.get('titre')?.dirty)"
                  class="text-danger small">
                  <div *ngIf="bookForm.get('titre')?.errors?.['required']">
                    Le titre est obligatoire.
                  </div>
                </div>
              </div>


              <div class="form-group col-md-4">
                <input type="text" formControlName="auteur" class="form-control" placeholder="Auteur" required>
                <div
                  *ngIf="bookForm.get('auteur')?.invalid && (bookForm.get('auteur')?.touched || bookForm.get('auteur')?.dirty)"
                  class="text-danger small">
                  <div *ngIf="bookForm.get('auteur')?.errors?.['required']">
                    L'auteur est obligatoire.
                  </div>
                </div>
              </div>

            </div>

            <div class="form-row">
              <div class="form-group col-md-4">
                <textarea formControlName="description" class="form-control" placeholder="Description" required
                  rows="2"></textarea>
                <div
                  *ngIf="bookForm.get('description')?.invalid && (bookForm.get('description')?.touched || bookForm.get('description')?.dirty)"
                  class="text-danger small">
                  <div *ngIf="bookForm.get('description')?.errors?.['required']">
                    La description est obligatoire.
                  </div>
                </div>
              </div>

              <div class="form-group col-md-4">
                <input type="number" formControlName="prix" class="form-control" placeholder="Prix" required>
                <div
                  *ngIf="bookForm.get('prix')?.invalid && (bookForm.get('prix')?.touched || bookForm.get('prix')?.dirty)"
                  class="text-danger small">
                  <div *ngIf="bookForm.get('prix')?.errors?.['required']">
                    Le prix est obligatoire.
                  </div>
                </div>
              </div>

            </div>

            <!-- Ligne 3 -->
            <div class="form-row">
              <div class="form-group col-md-6">
                <label class="form-label">Image</label>
                <div class="custom-file">
                  <input type="file" class="custom-file-input" id="customFile" (change)="onSelectedFile($event)"
                    formControlName="image" required />
                  <label class="custom-file-label" for="customFile">Choisir un fichier</label>
                </div>
                <div
                  *ngIf="bookForm.get('image')?.invalid && (bookForm.get('image')?.touched || bookForm.get('image')?.dirty)"
                  class="text-danger small mt-1">
                  <div *ngIf="bookForm.get('image')?.errors?.['required']">
                    L'image est obligatoire.
                  </div>
                </div>
              </div>

            </div>
            <div class="form-row">
              <div class="form-group col-md-4">
                <div class="dropdown">
                  <button class="btn btn-outline-primary dropdown-toggle" type="button" id="dropdownCategories"
                    data-bs-toggle="dropdown" aria-expanded="false">
                    Sélectionner la(les) catégorie(s) associée(s)
                  </button>
                  <ul class="dropdown-menu p-3" aria-labelledby="dropdownCategories"
                    style="max-height: 200px; overflow-y: auto;">
                    <li *ngFor="let cat of categories" class="form-check">
                      <input class="form-check-input" type="checkbox" [id]="'cat-' + cat.id" [value]="cat.id" placeholder="d"
                        (change)="onCategoryChange($event)"
                        [checked]="bookForm.get('categories')!.value?.includes(cat.id)" />
                      <label class="form-check-label" [for]="'cat-' + cat.id">{{ cat.nom }}</label>
                    </li>
                  </ul>
                </div>
                <div
                  *ngIf="bookForm.get('categories')?.invalid && (bookForm.get('categories')?.touched || bookForm.get('categories')?.dirty)"
                  class="text-danger small">
                  <div *ngIf="bookForm.get('categories')?.errors?.['required']">
                    Veuillez sélectionner au moins une catégorie.
                  </div>
                </div>
              </div>



            </div>
            <div class="form-row">
              <div class="form-group col-md-3 d-flex align-items-end">
                <button class="btn btn-primary w-100" type="submit">Ajouter</button>
              </div>
            </div>

          </form>
        </div>
      </div>
    </div>